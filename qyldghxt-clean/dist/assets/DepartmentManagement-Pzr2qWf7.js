import{a as e,j as t}from"./index-ByQWdRVi.js";import{r as a}from"./charts--DrkC4h1.js";import{T as s}from"./TableManager-CI9BWYWi.js";import"./vendor-De9qiMg1.js";import"./router-BWTJJsff.js";import"./ui-CyUNfsEX.js";import"./pdf-60kGjG4V.js";import"./utils-d68qSfg_.js";import"./DeleteConfirmDialog-CRlob68K.js";import"./InlineAlert-ConnvRud.js";const n=()=>{const{getDepartments:n,addDepartment:l,updateDepartment:r,deleteDepartment:i}=e(),[o,c]=a.useState([]),[d,m]=a.useState(null);a.useEffect(()=>{p()},[]);const p=async()=>{const e=await n();e.success&&c(e.data||[])},u=async e=>!!(await l(e)).success&&(p(),!0),x=[{key:"name",label:"部门名称",required:!0},{key:"code",label:"部门编码",required:!0},{key:"manager",label:"部门负责人"},{key:"phone",label:"联系电话"},{key:"email",label:"邮箱"},{key:"status",label:"状态",type:"select",options:[{value:"active",label:"启用"},{value:"inactive",label:"禁用"}],render:e=>t.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("active"===e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===e?"启用":"禁用"})},{key:"description",label:"描述",type:"textarea"}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"部门管理"}),t.jsx("p",{className:"text-gray-600",children:"管理企业组织架构和部门信息"})]}),t.jsx(s,{title:"部门列表",data:o,columns:x,onAdd:u,onEdit:async(e,t)=>!!(await r(e,t)).success&&(p(),m(null),!0),onDelete:async e=>!!(await i(e)).success&&(p(),!0),onCopy:e=>{const t={...e};if(delete t.id,t.name=`${t.name}_副本`,t.code){const e=Date.now().toString().slice(-4);t.code=`${t.code}_${e}`}u(t)},editingId:d,onEditingChange:m})]})};export{n as default};

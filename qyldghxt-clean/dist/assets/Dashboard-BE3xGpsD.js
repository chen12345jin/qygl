import{u as e,a as s,j as t}from"./index-ByQWdRVi.js";import{r,a,b as o,B as l,C as i,X as n,Y as d,T as c,c as x}from"./charts--DrkC4h1.js";import{u as m}from"./router-BWTJJsff.js";import{B as h,h as g,T as p,d as u,C as b,A as j,c as y,b as f}from"./ui-CyUNfsEX.js";import"./vendor-De9qiMg1.js";import"./pdf-60kGjG4V.js";import"./utils-d68qSfg_.js";const v=a.memo(({stat:e,onClick:s})=>{const r=e.icon;return t.jsx("div",{className:`${e.bgColor} rounded-xl p-6 cursor-pointer transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-100`,onClick:s,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-600 text-sm font-medium mb-2",children:e.title}),t.jsx("p",{className:`text-3xl font-bold ${e.textColor}`,children:e.value})]}),t.jsx("div",{className:`${e.color} p-3 rounded-lg shadow-md`,children:t.jsx(r,{className:"w-6 h-6 text-white"})})]})})}),N=a.memo(({action:e,onClick:s})=>{const r=e.icon;return t.jsx("div",{className:"bg-white rounded-xl p-6 cursor-pointer transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl border border-gray-100 group",onClick:s,children:t.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg group-hover:bg-gray-100 transition-colors",children:t.jsx(r,{className:`w-8 h-8 ${e.color}`})}),t.jsx("h3",{className:"font-semibold text-gray-800 group-hover:text-gray-900",children:e.title})]})})}),w=()=>{const a=m(),{user:w}=e(),{getDepartments:C,getEmployees:k,getDepartmentTargets:A,getActionPlans:z,getMonthlyProgress:S}=s(),[D,P]=r.useState({departments:0,employees:0,targets:0,actionPlans:0}),[G,$]=r.useState([]),M=r.useCallback(async()=>{try{const[e,s,t,r,a]=await Promise.all([C(),k(),A({year:(new Date).getFullYear()}),z(),S({year:(new Date).getFullYear()})]),o=()=>s?.success&&Array.isArray(s.data)?s.data.length:0,l=()=>t?.success&&Array.isArray(t.data)?t.data.length:0,i=()=>r?.success&&Array.isArray(r.data)?r.data.length:0;if(P({departments:(()=>e?.success&&Array.isArray(e.data)?e.data.length:0)(),employees:o(),targets:l(),actionPlans:i()}),a?.success&&Array.isArray(a.data)&&a.data.length>0){const e=a.data.reduce((e,s)=>{if(!s||"object"!=typeof s)return e;const t=`${s.month||1}月`;return e[t]||(e[t]={month:t,sales:0,profit:0}),e[t].sales+=Number(s.actual_value)||0,e[t].profit+=Number(s.target_value)||0,e},{}),s=Object.values(e);$(Array.isArray(s)?s:[])}else $([])}catch(e){console.error("加载仪表板数据失败:",e),P({departments:0,employees:0,targets:0,actionPlans:0}),$([])}},[C,k,A,z]);r.useEffect(()=>{M()},[M]);const K=r.useMemo(()=>[{title:"部门数量",value:D.departments,icon:h,color:"bg-blue-500",bgColor:"bg-blue-50",textColor:"text-blue-600",path:"/system/departments"},{title:"员工总数",value:D.employees,icon:g,color:"bg-green-500",bgColor:"bg-green-50",textColor:"text-green-600",path:"/system/employees"},{title:"目标设定",value:D.targets,icon:p,color:"bg-purple-500",bgColor:"bg-purple-50",textColor:"text-purple-600",path:"/department-targets"},{title:"行动计划",value:D.actionPlans,icon:u,color:"bg-orange-500",bgColor:"bg-orange-50",textColor:"text-orange-600",path:"/action-plans"}],[D]),T=r.useMemo(()=>[{title:"部门目标分解",icon:p,path:"/department-targets",color:"text-blue-600"},{title:"年度工作规划",icon:b,path:"/annual-work-plan",color:"text-green-600"},{title:"大事件提炼",icon:j,path:"/major-events",color:"text-red-600"},{title:"月度推进计划",icon:y,path:"/monthly-progress",color:"text-purple-600"},{title:"5W2H行动计划",icon:u,path:"/action-plans",color:"text-yellow-600"},{title:"年度规划表",icon:f,path:"/annual-planning-chart",color:"text-indigo-600"}],[]),Y=r.useCallback(e=>{a(e)},[a]),B=r.useMemo(()=>Array.isArray(G)?G:[],[G]);return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"relative bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 rounded-2xl shadow-2xl p-8 text-white overflow-hidden",children:[t.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10",children:[t.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full animate-blob"}),t.jsx("div",{className:"absolute bottom-10 right-10 w-24 h-24 bg-white rounded-full animate-blob animation-delay-2000"}),t.jsx("div",{className:"absolute top-1/2 left-1/2 w-20 h-20 bg-white rounded-full animate-blob animation-delay-4000"})]}),t.jsxs("div",{className:"relative flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent",children:["欢迎回来，",w?.username||"用户","！"]}),t.jsxs("p",{className:"text-blue-100 text-lg",children:[w?.department||"未知部门"," · ",w?.role||"未知角色"," · 今天是 ",(new Date).toLocaleDateString("zh-CN")]})]}),t.jsxs("div",{className:"text-right cursor-pointer group",onClick:()=>a("/annual-planning"),children:[t.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent group-hover:scale-105 transition-transform",children:"2025"}),t.jsx("div",{className:"text-blue-200 font-medium group-hover:text-white transition-colors",children:"年度规划进行中"})]})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:K.map((e,s)=>t.jsx(v,{stat:e,onClick:()=>Y(e.path)},s))}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"group relative bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg p-6 cursor-pointer hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-gray-100",onClick:()=>a("/data-analysis"),children:[t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg mr-3 shadow-md",children:t.jsx(f,{size:20,className:"text-white"})}),"月度销售趋势"]}),t.jsx("span",{className:"text-sm font-medium bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent group-hover:scale-105 transition-transform",children:"查看详情 →"})]}),t.jsx("div",{className:"h-72",children:t.jsx(o,{width:"100%",height:"100%",children:t.jsxs(l,{data:B,children:[t.jsx(i,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),t.jsx(n,{dataKey:"month",stroke:"#666",fontSize:12}),t.jsx(d,{stroke:"#666",fontSize:12}),t.jsx(c,{contentStyle:{background:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.1)",fontSize:"12px"}}),t.jsx(x,{dataKey:"sales",name:"实际",fill:"url(#salesGradient)",radius:[6,6,0,0]}),t.jsx(x,{dataKey:"profit",name:"目标",fill:"url(#profitGradient)",radius:[6,6,0,0]}),t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"salesGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),t.jsx("stop",{offset:"100%",stopColor:"#1d4ed8"})]}),t.jsxs("linearGradient",{id:"profitGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#10b981"}),t.jsx("stop",{offset:"100%",stopColor:"#047857"})]})]})]})})})]}),t.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg p-6 border border-gray-100",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-lg mr-3",children:t.jsx(y,{size:20,className:"text-white"})}),"快捷操作"]})}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:T.map((e,s)=>t.jsx(N,{action:e,onClick:()=>Y(e.path)},s))})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg p-6 border border-gray-100",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg mr-3 shadow-md",children:t.jsx(g,{size:20,className:"text-white"})}),"管理员功能"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"group relative flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-purple-200",onClick:()=>a("/system/employees"),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center shadow-md",children:t.jsx(g,{size:16,className:"text-white"})}),t.jsx("span",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"员工管理"})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full shadow-sm"})})]}),t.jsxs("div",{className:"group relative flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-blue-200",onClick:()=>a("/system/departments"),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center shadow-md",children:t.jsx(h,{size:16,className:"text-white"})}),t.jsx("span",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"部门管理"})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full shadow-sm"})})]}),t.jsxs("div",{className:"group relative flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-green-200",onClick:()=>a("/system/settings"),children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center shadow-md",children:t.jsx(j,{size:16,className:"text-white"})}),t.jsx("span",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"系统设置"})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full shadow-sm"})})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg p-6 border border-gray-100",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg mr-3 shadow-md",children:t.jsx(j,{size:20,className:"text-white"})}),"系统公告"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"group relative flex items-start space-x-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-yellow-200",onClick:()=>a("/system/settings"),children:[t.jsx("div",{className:"flex-shrink-0 w-3 h-3 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full mt-2 shadow-sm"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"2025年度规划系统正式上线"}),t.jsx("p",{className:"text-xs text-gray-600 mt-2 leading-relaxed",children:"请各部门及时完成目标分解和计划制定 - 2024年12月25日"})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full shadow-sm"})})]}),t.jsxs("div",{className:"group relative flex items-start space-x-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-blue-200",onClick:()=>a("/system/settings"),children:[t.jsx("div",{className:"flex-shrink-0 w-3 h-3 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full mt-2 shadow-sm"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"钉钉集成功能已开放"}),t.jsx("p",{className:"text-xs text-gray-600 mt-2 leading-relaxed",children:"支持消息推送和审批流程同步 - 2024年12月20日"})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full shadow-sm"})})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg p-6 border border-gray-100",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[t.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg mr-3 shadow-md",children:t.jsx(y,{size:20,className:"text-white"})}),"最新动态"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"group relative flex items-center justify-between p-4 bg-white rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-gray-200",onClick:()=>a("/department-targets"),children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full flex items-center justify-center shadow-md",children:t.jsx(u,{size:18,className:"text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"销售部完成Q1目标设定"}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"张经理 · 2小时前"})]})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full shadow-sm"})})]}),t.jsxs("div",{className:"group relative flex items-center justify-between p-4 bg-white rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-gray-200",onClick:()=>a("/annual-work-plan"),children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-100 to-cyan-100 rounded-full flex items-center justify-center shadow-md",children:t.jsx(b,{size:18,className:"text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"生产部更新年度工作计划"}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"李主管 · 4小时前"})]})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full shadow-sm"})})]}),t.jsxs("div",{className:"group relative flex items-center justify-between p-4 bg-white rounded-xl cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-300 border border-gray-200",onClick:()=>a("/system/employees"),children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-100 to-violet-100 rounded-full flex items-center justify-center shadow-md",children:t.jsx(g,{size:18,className:"text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-gray-800 group-hover:text-gray-900",children:"人事部新增5名员工信息"}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"王主管 · 6小时前"})]})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:t.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full shadow-sm"})})]})]})]})]})]})};export{w as default};

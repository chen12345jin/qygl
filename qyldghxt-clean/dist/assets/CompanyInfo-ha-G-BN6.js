import{a as e,j as s}from"./index-ByQWdRVi.js";import{r as t}from"./charts--DrkC4h1.js";import{I as a}from"./InlineAlert-ConnvRud.js";import{B as l,u as r,z as i}from"./ui-CyUNfsEX.js";import"./vendor-De9qiMg1.js";import"./router-BWTJJsff.js";import"./pdf-60kGjG4V.js";import"./utils-d68qSfg_.js";const n=()=>{const[n,o]=t.useState({name:"",legalPerson:"",address:"",phone:"",email:"",website:"",establishDate:""}),[d,m]=t.useState(!1),[c,x]=t.useState({}),[h,p]=t.useState({show:!1,message:"",type:"info"}),[u,b]=t.useState(null);t.useEffect(()=>()=>{u&&clearTimeout(u)},[u]);const{getCompanyInfo:g,updateCompanyInfo:j}=e();t.useEffect(()=>{(async()=>{const e=await g();e.success&&o({name:e.data?.name||"",legalPerson:e.data?.legalPerson||"",address:e.data?.address||"",phone:e.data?.phone||"",email:e.data?.email||"",website:e.data?.website||"",establishDate:e.data?.establishDate||""})})()},[]);const f=(e,s="success")=>{u&&clearTimeout(u),p({show:!0,message:e,type:s});const t=setTimeout(()=>{p({show:!1,message:"",type:"info"}),b(null)},3e3);b(t)},v=(e,s)=>{o({...n,[e]:s})};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl shadow-lg relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-3 bg-gradient-to-r from-white/20 to-white/30 rounded-lg shadow-lg",children:s.jsx(l,{size:24,className:"text-white"})}),s.jsx("h1",{className:"text-3xl font-bold text-white bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent",children:"企业信息管理"})]}),s.jsx("button",{onClick:()=>m(!d),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-white/20 to-white/30 hover:from-white/30 hover:to-white/40 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:d?s.jsx(s.Fragment,{children:s.jsx("span",{children:"取消编辑"})}):s.jsx(s.Fragment,{children:s.jsx("span",{children:"编辑信息"})})})]}),s.jsx("p",{className:"text-blue-100 text-lg",children:"管理企业基本信息和联系信息"})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-xl shadow-lg border border-white/50 p-6",children:[s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return n.name?.trim()||(e.name="企业名称不能为空"),n.phone&&!/^[\d\s\-\+\(\)]+$/.test(n.phone)&&(e.phone="请输入有效的电话号码"),n.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)&&(e.email="请输入有效的邮箱地址"),n.website&&!/^https?:\/\/.+/.test(n.website)&&(e.website="请输入有效的网址"),x(e),0===Object.keys(e).length})())try{await j(n),m(!1),i.success("企业信息更新成功！"),f("企业信息更新成功！","success")}catch(s){i.error("更新失败，请重试"),f("更新失败，请重试","error")}else f("请检查表单中的错误","error")},className:"space-y-6",children:[h.show&&s.jsx(a,{message:h.message,type:h.type,onClose:()=>p({...h,show:!1})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["企业名称 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:n.name||"",onChange:e=>{v("name",e.target.value),c.name&&x({...c,name:""})},className:"form-input "+(c.name?"border-red-500":""),disabled:!d,required:!0}),c.name&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"法定代表人"}),s.jsx("input",{type:"text",value:n.legalPerson||"",onChange:e=>v("legalPerson",e.target.value),className:"form-input",disabled:!d})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"企业地址"}),s.jsx("input",{type:"text",value:n.address||"",onChange:e=>v("address",e.target.value),className:"form-input",disabled:!d})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"联系电话"}),s.jsx("input",{type:"tel",value:n.phone||"",onChange:e=>{v("phone",e.target.value),c.phone&&x({...c,phone:""})},className:"form-input "+(c.phone?"border-red-500":""),disabled:!d}),c.phone&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"企业邮箱"}),s.jsx("input",{type:"email",value:n.email||"",onChange:e=>{v("email",e.target.value),c.email&&x({...c,email:""})},className:"form-input "+(c.email?"border-red-500":""),disabled:!d}),c.email&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"官方网站"}),s.jsx("input",{type:"url",value:n.website||"",onChange:e=>{v("website",e.target.value),c.website&&x({...c,website:""})},className:"form-input "+(c.website?"border-red-500":""),disabled:!d}),c.website&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.website})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"成立日期"}),s.jsx("input",{type:"date",value:n.establishDate||"",onChange:e=>v("establishDate",e.target.value),className:"form-input",disabled:!d})]})]}),d&&s.jsxs("div",{className:"flex items-center space-x-3 pt-6 border-t border-gray-200",children:[s.jsxs("button",{type:"submit",className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:[s.jsx(r,{size:18}),s.jsx("span",{children:"保存信息"})]}),s.jsx("button",{type:"button",onClick:()=>{m(!1),o(companyInfo)},className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:"取消"})]})]}),!d&&s.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-lg border border-white/50",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"企业概览"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"企业名称："}),s.jsx("span",{className:"text-gray-600",children:n.name||"未设置"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"法定代表人："}),s.jsx("span",{className:"text-gray-600",children:n.legalPerson||"未设置"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"联系电话："}),s.jsx("span",{className:"text-gray-600",children:n.phone||"未设置"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"成立日期："}),s.jsx("span",{className:"text-gray-600",children:n.establishDate||"未设置"})]})]})]})]})]})})};export{n as default};

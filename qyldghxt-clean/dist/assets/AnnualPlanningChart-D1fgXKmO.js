import{a as e,j as r}from"./index-ByQWdRVi.js";import{r as s,a as t}from"./charts--DrkC4h1.js";import{p as a,a as l}from"./export-9Rbd0ORM.js";import{b as n,C as d,P as c,D as x,T as o,c as i,F as m,q as p,V as h,W as b,h as j}from"./ui-CyUNfsEX.js";import"./vendor-De9qiMg1.js";import"./router-BWTJJsff.js";import"./pdf-60kGjG4V.js";import"./utils-d68qSfg_.js";const u=()=>{const{getAnnualPlans:u,getDepartments:g}=e(),[N,y]=s.useState([]),[f,w]=s.useState([]),[v,S]=s.useState((new Date).getFullYear());s.useEffect(()=>{_()},[v]);const _=async()=>{const[e,r]=await Promise.all([u({year:v,sheet_type:"planning"}),g()]);if(e.success){const r=k(e.data);y(r)}r.success&&w(r.data)},k=e=>{const r=[],s=["平台部","SHEIN","阿里部","国内定制"];for(let t=1;t<=12;t++)s.forEach(s=>{const a=e.find(e=>e.department_name===s&&e.month===t);r.push({month:t,department:s,sales_amount:a&&a.target_value||0,target_level:a&&a.target_level||"A",description:a?a.description:""})});return r},L=(e,r)=>N.find(s=>s.month===e&&s.department===r)||{},E={1:{name:"规划导航月",color:"month-planning"},2:{name:"招聘月",color:"month-recruit"},3:{name:"人才引备战月",color:"month-talent"},4:{name:"产品月",color:"month-product"},5:{name:"产品月",color:"month-product"},6:{name:"年中总结月",color:"month-summary"},7:{name:"学习月",color:"month-study"},8:{name:"备战月",color:"month-battle"},9:{name:"抢战月",color:"month-sprint"},10:{name:"丰收月",color:"month-harvest"},11:{name:"冲刺月",color:"month-impact"},12:{name:"总结月",color:"month-total"}};return r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl shadow-xl",children:r.jsx(n,{className:"w-8 h-8 text-white"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["泉州太禾服饰有限公司 ",v,"年 年度规划表"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"年度业务目标与进度可视化分析"})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-4 py-2 rounded-xl",children:[r.jsx(d,{className:"w-4 h-4 text-blue-600"}),r.jsx("select",{value:v,onChange:e=>S(parseInt(e.target.value)),className:"bg-transparent border-none focus:outline-none text-blue-700 font-medium",children:[2024,2025,2026].map(e=>r.jsxs("option",{value:e,children:[e,"年"]},e))})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:()=>a("annual-chart"),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl font-semibold hover:shadow-xl transition-all duration-300",children:[r.jsx(c,{size:18}),r.jsx("span",{children:"打印"})]}),r.jsxs("button",{onClick:()=>l("annual-chart",`年度规划表_${v}`),className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:shadow-xl transition-all duration-300",children:[r.jsx(x,{size:18}),r.jsx("span",{children:"导出PDF"})]})]})]})]}),r.jsxs("div",{id:"annual-chart",className:"overflow-x-auto",children:[r.jsx("div",{className:"mb-6 text-center",children:r.jsxs("div",{className:"inline-flex items-center space-x-3 bg-gradient-to-r from-blue-50 to-purple-50 px-6 py-3 rounded-2xl",children:[r.jsx(o,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"月度业务目标"}),r.jsx(i,{className:"w-6 h-6 text-purple-600"})]})}),r.jsx("div",{className:"rounded-3xl overflow-hidden shadow-2xl",children:r.jsxs("table",{className:"w-full",children:[r.jsxs("thead",{children:[r.jsxs("tr",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[r.jsx("th",{rowSpan:"2",className:"px-6 py-4 text-center border-r border-white/30",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(d,{className:"w-4 h-4"}),r.jsx("span",{children:"月份"})]})}),r.jsx("th",{rowSpan:"2",className:"px-6 py-4 text-center border-r border-white/30",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(m,{className:"w-4 h-4"}),r.jsx("span",{children:"主题"})]})}),r.jsx("th",{colSpan:"3",className:"px-6 py-4 text-center border-r border-white/30 bg-green-600/80 backdrop-blur-sm",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(p,{className:"w-4 h-4"}),r.jsx("span",{children:"平台部"})]})}),r.jsx("th",{colSpan:"3",className:"px-6 py-4 text-center border-r border-white/30 bg-blue-600/80 backdrop-blur-sm",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(h,{className:"w-4 h-4"}),r.jsx("span",{children:"SHEIN"})]})}),r.jsx("th",{colSpan:"3",className:"px-6 py-4 text-center border-r border-white/30 bg-purple-600/80 backdrop-blur-sm",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(b,{className:"w-4 h-4"}),r.jsx("span",{children:"阿里部"})]})}),r.jsx("th",{colSpan:"3",className:"px-6 py-4 text-center border-r border-white/30 bg-orange-600/80 backdrop-blur-sm",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(j,{className:"w-4 h-4"}),r.jsx("span",{children:"国内定制"})]})}),r.jsx("th",{colSpan:"3",className:"px-6 py-4 text-center bg-gray-600/80 backdrop-blur-sm",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(n,{className:"w-4 h-4"}),r.jsx("span",{children:"小计"})]})})]}),r.jsxs("tr",{className:"bg-gradient-to-r from-blue-500/90 to-purple-500/90 text-white",children:[r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"保底"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"完成"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"差异"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"保底"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"完成"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"差异"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"保底"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"完成"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"差异"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"保底"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"完成"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"差异"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"完成"}),r.jsx("th",{className:"px-4 py-3 text-center border-r border-white/20",children:"达成"}),r.jsx("th",{className:"px-4 py-3 text-center",children:"差异"})]})]}),r.jsxs("tbody",{children:[Array.from({length:12},(e,s)=>{const t=s+1,a=E[t],l=(e=>N.filter(r=>r.month===e).reduce((e,r)=>e+(r.sales_amount||0),0))(t);return r.jsxs("tr",{className:"group hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-purple-50/50 transition-all duration-300 border-b border-gray-100/50",children:[r.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100/30",children:r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm shadow-md",children:t}),r.jsx("span",{className:"font-medium text-gray-800",children:"月"})]})}),r.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-100/30 font-medium text-gray-700",children:a.name}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-green-700 font-medium",children:(L(t,"平台部").sales_amount||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-gray-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-red-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-blue-700 font-medium",children:(L(t,"SHEIN").sales_amount||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-gray-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-red-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-purple-700 font-medium",children:(L(t,"阿里部").sales_amount||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-gray-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-red-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-orange-700 font-medium",children:(L(t,"国内定制").sales_amount||0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-gray-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-red-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 font-bold text-gray-800",children:l.toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-100/20 text-gray-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center text-red-600",children:"0"})]},t)}),r.jsxs("tr",{className:"bg-gradient-to-r from-gray-100 to-gray-200 font-bold group hover:from-gray-200 hover:to-gray-300 transition-all duration-300",children:[r.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-300/50 text-gray-800",children:"小计"}),r.jsx("td",{className:"px-6 py-4 text-center border-r border-gray-300/50 text-gray-800",children:"年度总计"}),["平台部","SHEIN","阿里部","国内定制"].map(e=>{return r.jsxs(t.Fragment,{children:[r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-300/50 text-gray-800",children:(s=e,N.filter(e=>e.department===s).reduce((e,r)=>e+(r.sales_amount||0),0)).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-300/50 text-gray-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-300/50 text-red-600",children:"0"})]},e);var s}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-300/50 text-lg text-gray-800",children:N.reduce((e,r)=>e+(r.sales_amount||0),0).toLocaleString()}),r.jsx("td",{className:"px-4 py-3 text-center border-r border-gray-300/50 text-gray-600",children:"0"}),r.jsx("td",{className:"px-4 py-3 text-center text-red-600",children:"0"})]})]})]})}),r.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-blue-50 to-blue-100 px-4 py-3 rounded-xl",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 shadow-md"}),r.jsx("span",{className:"font-medium text-blue-800",children:"规划期（1-3月）"})]}),r.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-orange-50 to-orange-100 px-4 py-3 rounded-xl",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 shadow-md"}),r.jsx("span",{className:"font-medium text-orange-800",children:"产品期（4-6月）"})]}),r.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-green-50 to-green-100 px-4 py-3 rounded-xl",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-green-400 to-green-600 shadow-md"}),r.jsx("span",{className:"font-medium text-green-800",children:"成长期（7-9月）"})]}),r.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-purple-50 to-purple-100 px-4 py-3 rounded-xl",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 shadow-md"}),r.jsx("span",{className:"font-medium text-purple-800",children:"收获期（10-12月）"})]})]}),r.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl shadow-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(m,{className:"w-5 h-5 text-blue-600"})}),r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"说明"})]}),r.jsxs("ul",{className:"space-y-3 text-gray-700",children:[r.jsxs("li",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-blue-600",children:"保底："}),"部门必须完成的最低目标"]})]}),r.jsxs("li",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-green-600",children:"完成："}),"实际完成的业绩数据"]})]}),r.jsxs("li",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-red-600",children:"差异："}),"完成数与保底数的差值"]})]}),r.jsxs("li",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-purple-600",children:"产能匹配："}),"各部门目标需与生产部门产能相匹配"]})]}),r.jsxs("li",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-orange-600",children:"更新频率："}),"数据更新频率：月度更新"]})]})]})]})]})]})})};export{u as default};

import{a as e,j as t}from"./index-ByQWdRVi.js";import{r as a}from"./charts--DrkC4h1.js";import{T as s}from"./TableManager-CI9BWYWi.js";import"./vendor-De9qiMg1.js";import"./router-BWTJJsff.js";import"./ui-CyUNfsEX.js";import"./pdf-60kGjG4V.js";import"./utils-d68qSfg_.js";import"./DeleteConfirmDialog-CRlob68K.js";import"./InlineAlert-ConnvRud.js";const l=()=>{const{getEmployees:l,addEmployee:n,updateEmployee:i,deleteEmployee:r,getDepartments:o}=e(),[c,d]=a.useState([]),[m,p]=a.useState([]),[u,y]=a.useState(null);a.useEffect(()=>{j(),x()},[]);const j=async()=>{const e=await l();e.success&&d(e.data||[])},x=async()=>{const e=await o();e.success&&p(e.data||[])},b=async e=>!!(await n(e)).success&&(j(),!0),g=[{key:"name",label:"姓名",required:!0},{key:"employee_id",label:"工号",required:!0},{key:"department",label:"部门",type:"select",options:m.map(e=>({value:e.name,label:e.name})),required:!0},{key:"position",label:"职位"},{key:"phone",label:"电话"},{key:"email",label:"邮箱"},{key:"status",label:"状态",type:"select",options:[{value:"active",label:"在职"},{value:"inactive",label:"离职"}],render:e=>t.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("active"===e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===e?"在职":"离职"})}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"员工管理"}),t.jsx("p",{className:"text-gray-600",children:"管理企业员工信息和职位分配"})]}),t.jsx(s,{title:"员工列表",data:c,columns:g,onAdd:b,onEdit:async(e,t)=>!!(await i(e,t)).success&&(j(),y(null),!0),onDelete:async e=>!!(await r(e)).success&&(j(),!0),onCopy:e=>{const t={...e};delete t.id,t.name=`${t.name}_副本`,b(t)},editingId:u,onEditingChange:y})]})};export{l as default};
